<!DOCTYPE html>
<html lang="vi">

<head>
    <title>Game x·∫øp h√¨nh</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.png" type="image/png">
    <style>
        .game-title-area {
            padding-top: 10px;
        }

        /* --- Th√™m CSS cho l·ª±a ch·ªçn ch·∫ø ƒë·ªô --- */
        .game-mode-selection {
            text-align: center;
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 5px;
        }

        .game-mode-selection label {
            margin-right: 15px;
            margin-left: 5px;
            cursor: pointer;
        }

        .game-mode-selection input[type="radio"] {
            cursor: pointer;
        }

        #countdown-duration-group {
            display: inline-flex;
            /* S·ª≠ d·ª•ng flex ƒë·ªÉ cƒÉn ch·ªânh t·ªët h∆°n */
            align-items: center;
            /* CƒÉn gi·ªØa theo chi·ªÅu d·ªçc */
            margin-left: 10px;
            vertical-align: middle;
        }

        #countdown-duration-group label {
            margin-right: 5px;
            font-size: 0.9em;
            margin-bottom: 0;
            /* B·ªè margin bottom m·∫∑c ƒë·ªãnh c·ªßa label */
        }

        /* Style cho thanh tr∆∞·ª£t */
        #countdown-seconds.custom-range {
            width: auto;
            /* Cho ph√©p co gi√£n */
            max-width: 150px;
            /* Gi·ªõi h·∫°n chi·ªÅu r·ªông t·ªëi ƒëa */
            vertical-align: middle;
            /* CƒÉn gi·ªØa */
            margin: 0 5px;
            /* Kho·∫£ng c√°ch hai b√™n */
            cursor: pointer;
        }

        #countdown-value {
            font-weight: bold;
            min-width: 20px;
            /* ƒê·∫£m b·∫£o c√≥ ƒë·ªß ch·ªó cho s·ªë 2 ch·ªØ s·ªë */
            display: inline-block;
            text-align: right;
            /* CƒÉn ph·∫£i s·ªë */
        }

        /* --- Th√™m CSS cho tr·∫°ng th√°i thua --- */
        #game-table.game-lost {
            border: 3px solid #dc3545;
            /* M√†u ƒë·ªè Bootstrap */
            box-shadow: 0 0 15px #dc3545;
        }

        #game-table.game-lost .image-cell {
            border-color: #dc3545;
            opacity: 0.7;
            /* H∆°i m·ªù ƒëi */
        }

        #game-table.game-lost img {
            cursor: not-allowed !important;
            /* Con tr·ªè kh√¥ng cho ph√©p */
        }

        :root {
            --sidebar-width: 320px;
            --transition-duration: 0.5s;
            --sidebar-bg: #fff;
            --header-color: #333;
            --button-bg: #d0021b;
            --button-color: #fff;
            --checkout-bg: #d0021b;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        .ins-sidebar {
            height: 100%;
            width: 0;
            position: fixed;
            top: 0;
            right: 0;
            background-color: var(--sidebar-bg);
            overflow-x: hidden;
            transition: var(--transition-duration);
            padding-top: 20px;
            box-shadow: -2px 0px 10px var(--shadow-color);
            z-index: 1000;
        }

        .ins-sidebar.open {
            width: var(--sidebar-width);
        }

        .ins-header {
            padding: 80px 20px 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ins-header h2 {
            font-size: 18px;
            margin: 0;
            font-weight: bold;
        }

        .close-btn {
            font-size: 24px;
            cursor: pointer;
        }

        .ins-content {
            padding: 15px 20px;
            max-height: calc(100vh - 150px);
            overflow-y: auto;
        }

        .cart-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 10px;
        }

        .cart-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
            margin-right: 10px;
        }

        .cart-item-info {
            flex-grow: 1;
        }

        .cart-item-info p {
            margin: 0;
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }

        .cart-item-info span {
            display: block;
            font-size: 14px;
            color: #888;
            margin-top: 2px;
        }

        .cart-item-remove {
            font-size: 16px;
            cursor: pointer;
            color: #d0021b;
        }

        .free-shipping-banner {
            display: flex;
            align-items: center;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #d0021b;
        }

        .free-shipping-banner img {
            width: 30px;
            margin-left: 5px;
        }

        .cart-footer {
            padding: 10px 20px;
            border-top: 1px solid #e0e0e0;
        }

        .cart-total {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .cart-actions {
            display: flex;
            justify-content: space-between;
        }

        .cart-actions button {
            flex: 1;
            margin: 0 5px;
            padding: 10px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            color: var(--button-color);
            background-color: var(--button-bg);
            font-size: 14px;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .cart-actions button:hover {
            background-color: #e14b6d;
        }
    </style>
</head>

<body>
    <!-- ===== NAVBAR START (Custom CSS) ===== -->
    <nav class="custom-navbar">
        <div class="nav-container">
            <a class="nav-brand" href="index.html">
                <img style="max-height: 40px; display: inline-block; vertical-align: middle;" src="logo.png" alt="Logo">
                <!-- Optional: Th√™m t√™n th∆∞∆°ng hi·ªáu d·∫°ng text -->
                <!-- <span style="vertical-align: middle; margin-left: 5px;">Game X·∫øp H√¨nh</span> -->
            </a>

            <button class="nav-toggler" id="navbarToggler" aria-label="Toggle navigation">
                <span class="nav-toggler-icon"></span>
            </button>

            <div class="nav-collapse" id="navbarNavContent">
                <ul class="nav-menu">
                    <li class="nav-menu-item ">
                        <a class="nav-menu-link" href="index.html">Trang Ch·ªß <span
                                class="screen-reader-only">(current)</span></a>
                    </li>
                    <li class="nav-menu-item active">
                        <a class="nav-menu-link" href="game.html">Ch∆°i Game</a>
                    </li>
                    <li class="nav-menu-item">
                        <a class="nav-menu-link" href="about.html">Gi·ªõi Thi·ªáu</a>
                    </li>
                    <li class="nav-menu-item">
                        <a class="nav-menu-link" href="contact.html">Li√™n H·ªá</a>
                    </li>
                    <li class="nav-menu-item">
                        <a class="nav-menu-link" href="split.html">C·∫Øt ·∫¢nh</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- ===== NAVBAR END (Custom CSS) ===== -->

    <div class="game-title-area">
        <h1>Game X·∫øp H√¨nh</h1>
        <h6>Click v√†o ·∫£nh ƒë·ªÉ xoay g√≥c ƒë·ªô c·ªßa ·∫£nh. K√©o th·∫£ ·∫£nh v√†o ƒë√∫ng v·ªã tr√≠.</h6>
        <!-- <h6>Tr√≤ ch∆°i n√†y ch·ªâ t∆∞∆°ng th√≠ch cho m√°y t√≠nh.</h6> -->
        <button class="btn btn-warning" id="insBtn">H∆∞·ªõng d·∫´n c√°ch ch∆°i</button>
    </div>


    <!-- Sidebar -->
    <div id="insSidebar" class="ins-sidebar">
        <div class="ins-header">
            <p><strong>B√≠ K√≠p X·∫øp H√¨nh</strong></p>
            <span id="closeSidebar" class="close-btn">√ó</span>
        </div>
        <div class="ins-content">
            <p>Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi th·ª≠ th√°ch x·∫øp h√¨nh!</p>
            <p><strong>B·∫Øt ƒë·∫ßu n√†o:</strong> H√£y ch·ªçn m·ªôt b·ª©c ·∫£nh b·∫°n th√≠ch ·ªü ph√≠a d∆∞·ªõi nh√©.</p>
            <p><strong>L√†m quen m·∫£nh gh√©p:</strong> C√°c m·∫£nh gh√©p ƒëang b·ªã l·ªôn x·ªôn v√† xoay t·ª© tung. ƒê·ª´ng lo, h√£y click
                v√†o ch√∫ng ƒë·ªÉ xoay v·ªÅ ƒë√∫ng chi·ªÅu.</p>
            <p><strong>X·∫øp th√¥i:</strong> D√πng chu·ªôt k√©o t·ª´ng m·∫£nh gh√©p v√†o ƒë√∫ng √¥ tr√™n b·∫£ng 3x3. H√£y nh√¨n ·∫£nh g·ªëc b√™n
                tr√°i ƒë·ªÉ tham kh·∫£o nh√©.</p>
            <p><strong>Ho√†n th√†nh:</strong> Khi b·ª©c tranh hi·ªán ra ho√†n ch·ªânh (ƒë√∫ng v·ªã tr√≠, ƒë√∫ng g√≥c), b·∫°n l√† ng∆∞·ªùi chi·∫øn
                th·∫Øng!</p>
            <hr>
            <p><strong>Th·ª≠ th√°ch b·∫£n th√¢n:</strong></p>
            <p>B·∫°n c√≥ th·ªÉ ch∆°i ch·∫ø ƒë·ªô <strong>C·ªï ƒëi·ªÉn</strong> ƒë·ªÉ xem m√¨nh x·∫øp trong bao l√¢u, ho·∫∑c th·ª≠ ch·∫ø ƒë·ªô
                <strong>ƒê·∫øm ng∆∞·ª£c</strong> (20-60 gi√¢y) ƒë·ªÉ tƒÉng ph·∫ßn gay c·∫•n!
            </p>
            <p>Ch√∫c b·∫°n c√≥ nh·ªØng ph√∫t gi√¢y th∆∞ gi√£n!</p>

        </div>
    </div>

    <!-- ===== L·ª∞A CH·ªåN CH·∫æ ƒê·ªò CH∆†I (C·∫≠p nh·∫≠t) ===== -->
    <div class="game-mode-selection">
        <strong>Ch·∫ø ƒë·ªô ch∆°i:</strong>
        <input type="radio" id="mode-classic" name="gameMode" value="classic" checked>
        <label for="mode-classic">C·ªï ƒëi·ªÉn (ƒê·∫øm l√™n)</label>

        <input type="radio" id="mode-countdown" name="gameMode" value="countdown">
        <label for="mode-countdown">ƒê·∫øm ng∆∞·ª£c</label>

        <div id="countdown-duration-group" style="display: none;"> <!-- ·∫®n ban ƒë·∫ßu -->
            <label for="countdown-seconds">Gi√¢y:</label>
            <!-- S·ª≠ d·ª•ng thanh tr∆∞·ª£t (range input) -->
            <input type="range" id="countdown-seconds" class="custom-range" value="30" min="20" max="60" step="5">
            <span id="countdown-value" style="font-weight: bold; margin-left: 5px;">30</span> gi√¢y
            <!-- Ho·∫∑c d√πng input number:
         <input type="number" id="countdown-seconds" class="form-control d-inline-block" style="max-width: 70px;" value="45" min="20" max="60" step="5"> gi√¢y
         -->
        </div>
    </div>
    <!-- ================================== -->


    <div class="game-container">
        <!-- Khu v·ª±c ·∫£nh tham chi·∫øu b√™n tr√°i -->
        <div class="reference-section">
            <h5>·∫¢nh G·ªëc</h5>
            <!-- ·∫¢nh g·ªëc m·∫∑c ƒë·ªãnh (Paimon) -->
            <img src="AnhXepHinh/paimon/Genshin_Impact.jpg" alt="·∫¢nh g·ªëc tham kh·∫£o" class="reference-image">
        </div>

        <!-- Khu v·ª±c ch∆°i game ch√≠nh gi·ªØa -->
        <div class="main-game-section">
            <div id="timer-display">Th·ªùi gian: 00:00</div>
            <div id="game-table">
                <!-- 9 √¥ m·ª•c ti√™u 3x3 -->
                <div class="image-cell target-cell" id="cell-0" ondragover="allowDrop(event, this)"
                    ondrop="receiveData(event)" ondragleave="dragLeave(event, this)"></div>
                <div class="image-cell target-cell" id="cell-1" ondragover="allowDrop(event, this)"
                    ondrop="receiveData(event)" ondragleave="dragLeave(event, this)"></div>
                <div class="image-cell target-cell" id="cell-2" ondragover="allowDrop(event, this)"
                    ondrop="receiveData(event)" ondragleave="dragLeave(event, this)"></div>
                <div class="image-cell target-cell" id="cell-3" ondragover="allowDrop(event, this)"
                    ondrop="receiveData(event)" ondragleave="dragLeave(event, this)"></div>
                <div class="image-cell target-cell" id="cell-4" ondragover="allowDrop(event, this)"
                    ondrop="receiveData(event)" ondragleave="dragLeave(event, this)"></div>
                <div class="image-cell target-cell" id="cell-5" ondragover="allowDrop(event, this)"
                    ondrop="receiveData(event)" ondragleave="dragLeave(event, this)"></div>
                <div class="image-cell target-cell" id="cell-6" ondragover="allowDrop(event, this)"
                    ondrop="receiveData(event)" ondragleave="dragLeave(event, this)"></div>
                <div class="image-cell target-cell" id="cell-7" ondragover="allowDrop(event, this)"
                    ondrop="receiveData(event)" ondragleave="dragLeave(event, this)"></div>
                <div class="image-cell target-cell" id="cell-8" ondragover="allowDrop(event, this)"
                    ondrop="receiveData(event)" ondragleave="dragLeave(event, this)"></div>
            </div>
        </div>

        <!-- Khu v·ª±c danh s√°ch ·∫£nh ngu·ªìn -->
        <div id="image-list-container">
            <h5>C√°c M·∫£nh Gh√©p</h5>
            <div id="image-list">
                <!-- C√°c √¥ ·∫£nh ngu·ªìn m·∫∑c ƒë·ªãnh (Paimon) - S·∫Ω ƒë∆∞·ª£c shuffle b·ªüi JS -->
                <div class="image-cell source-cell">
                    <img src="AnhXepHinh/paimon/anh-1.jpg" id="paimon-image01" data-correct-cell="cell-0"
                        draggable="true" />
                </div>
                <div class="image-cell source-cell">
                    <img src="AnhXepHinh/paimon/anh-2.jpg" id="paimon-image02" data-correct-cell="cell-1"
                        draggable="true" />
                </div>
                <div class="image-cell source-cell">
                    <img src="AnhXepHinh/paimon/anh-3.jpg" id="paimon-image03" data-correct-cell="cell-2"
                        draggable="true" />
                </div>
                <div class="image-cell source-cell">
                    <img src="AnhXepHinh/paimon/anh-4.jpg" id="paimon-image04" data-correct-cell="cell-3"
                        draggable="true" />
                </div>
                <div class="image-cell source-cell">
                    <img src="AnhXepHinh/paimon/anh-5.jpg" id="paimon-image05" data-correct-cell="cell-4"
                        draggable="true" />
                </div>
                <div class="image-cell source-cell">
                    <img src="AnhXepHinh/paimon/anh-6.jpg" id="paimon-image06" data-correct-cell="cell-5"
                        draggable="true" />
                </div>
                <div class="image-cell source-cell">
                    <img src="AnhXepHinh/paimon/anh-7.jpg" id="paimon-image07" data-correct-cell="cell-6"
                        draggable="true" />
                </div>
                <div class="image-cell source-cell">
                    <img src="AnhXepHinh/paimon/anh-8.jpg" id="paimon-image08" data-correct-cell="cell-7"
                        draggable="true" />
                </div>
                <div class="image-cell source-cell">
                    <img src="AnhXepHinh/paimon/anh-9.jpg" id="paimon-image09" data-correct-cell="cell-8"
                        draggable="true" />
                </div>
            </div>
        </div>

    </div><!-- End .game-container -->

    <!-- Khu v·ª±c ch·ªçn ·∫£nh m·ªõi -->
    <div id="puzzle-selection">
        <h4 style="font-weight: 600;">Ch·ªçn ·∫¢nh Kh√°c</h4>
        <div id="selection-list">
            <!-- Danh s√°ch ·∫£nh l·ª±a ch·ªçn s·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
        </div>
    </div>

    <!-- ===== FOOTER START ===== -->
    <footer class="site-footer bg-dark text-white py-4">
        <div class="container-fluid"> <!-- S·ª¨ D·ª§NG CONTAINER-FLUID ·ªû ƒê√ÇY -->
            <div class="footer-content-wrapper"> <!-- TH√äM DIV WRAPPER N√ÄY -->
                <div class="row">
                    <div class="col-md-3 mb-3 mb-md-0">
                        <img src="logo.png" alt="Logo" class="mb-2" style="max-height: 50px;">
                        <p class="small text-white-50">Gi·∫£i tr√≠ v√† s√°ng t·∫°o kh√¥ng gi·ªõi h·∫°n. .</p>
                    </div>
                    <div class="col-md-3 col-4 mb-3 mb-md-0">
                        <h5 class="fw-semibold">Kh√°m Ph√°</h5>
                        <ul class="list-unstyled">
                            <li><a href="index.html" class="text-white-50 text-decoration-none hover-light">Trang
                                    Ch·ªß</a>
                            </li>
                            <li><a href="game.html" class="text-white-50 text-decoration-none hover-light">Game X·∫øp
                                    H√¨nh</a>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-3 col-4 mb-3 mb-md-0">
                        <h5 class="fw-semibold">C√¥ng c·ª•</h5>
                        <ul class="list-unstyled">
                            <li><a href="split.html" class="text-white-50 text-decoration-none hover-light">C√¥ng C·ª• C·∫Øt
                                    ·∫¢nh L∆∞·ªõi</a></li>
                            <li><a href="scale.html" class="text-white-50 text-decoration-none hover-light">C√¥ng C·ª• C·∫Øt
                                    ·∫¢nh Vu√¥ng</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3 col-4">
                        <h5 class="fw-semibold">Th√¥ng Tin</h5>
                        <ul class="list-unstyled">
                            <li><a href="about.html" class="text-white-50 text-decoration-none hover-light">Gi·ªõi
                                    Thi·ªáu</a>
                            </li>
                            <li><a href="contact.html" class="text-white-50 text-decoration-none hover-light">Li√™n
                                    H·ªá</a>
                            </li>
                            <li><a href="terms.html" class="text-white-50 text-decoration-none hover-light">ƒêi·ªÅu
                                    Kho·∫£n</a></li>
                            <!-- Th√™m link ƒêi·ªÅu kho·∫£n n·∫øu c√≥ -->
                        </ul>
                    </div>
                </div>
                <hr class="my-3 border-secondary">
                <div class="row">
                    <div class="col-12 text-center">
                        <p class="small text-white-50 mb-0">
                            ¬© <span id="currentYear"></span> Game & ·∫¢nh Pro. Ph√°t tri·ªÉn b·ªüi Tr·∫ßn H·ªØu ƒê·∫°t. B·∫£o l∆∞u m·ªçi
                            quy·ªÅn.
                        </p>
                        <p class="small text-white-50">
                            <small>X√¢y d·ª±ng v·ªõi <i class="fas fa-heart text-danger"></i> v√† Bootstrap, jQuery.</small>
                            <!-- L∆∞u √Ω: Bootstrap 5 kh√¥ng c·∫ßn jQuery, n·∫øu b·∫°n d√πng BS5 th√¨ c√≥ th·ªÉ b·ªè jQuery -->
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- ===== FOOTER END ===== -->

    <!-- Modal th√¥ng b√°o chi·∫øn th·∫Øng -->
    <div class="modal fade" id="winModal" tabindex="-1" role="dialog" aria-labelledby="winModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="winModalLabel">üéâ Ch√∫c M·ª´ng! üéâ</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">√ó</span>
                    </button>
                </div>
                <div class="modal-body">
                    B·∫°n ƒë√£ ho√†n th√†nh b·ª©c tranh! <br>
                    Th·ªùi gian c·ªßa b·∫°n l√†: <strong id="final-time"></strong>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">ƒê√≥ng</button>
                    <button type="button" class="btn btn-primary" onclick="location.reload()">Ch∆°i L·∫°i</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== MODAL TH√îNG B√ÅO THUA CU·ªòC ===== -->
    <div class="modal fade" id="loseModal" tabindex="-1" role="dialog" aria-labelledby="loseModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title" id="loseModalLabel"> R·∫•t Ti·∫øc! ƒê√£ H·∫øt Gi·ªù</h5>
                    <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">√ó</span>
                    </button>
                </div>
                <div class="modal-body">
                    B·∫°n ƒë√£ kh√¥ng ho√†n th√†nh b·ª©c tranh trong th·ªùi gian quy ƒë·ªãnh.
                    <br>
                    H√£y c·ªë g·∫Øng h∆°n ·ªü l·∫ßn ch∆°i sau nh√©!
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">ƒê√≥ng</button>
                    <button type="button" class="btn btn-primary" onclick="resetGame()">Ch∆°i L·∫°i</button>
                    <!-- onclick g·ªçi h√†m reset m·ªõi thay v√¨ reload -->
                </div>
            </div>
        </div>
    </div>
    <!-- ==================================== -->

    <!-- Scripts (jQuery, Popper, Bootstrap) gi·ªØ nguy√™n -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


    <script src="puzzlesData.js"></script>
    <script src="game.js"></script>



</body>

</html>